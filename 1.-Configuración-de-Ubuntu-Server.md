# Características de la máquina virtual #
### Especificaciones técnicas
* Disco de 500Gb
* Memoria RAM 2 Gb/ 2048Mb
* Tres particiones: BIOS 1M,    sistema 20 G en el raíz (/) y resto del disco en /var.
### Nombre de la máquina virtual:
**xxx-uslimpia**
### Usuarios del sistema
| Usuarios del sistema | Contraseña | Rol |
| ------- | ------- | --------- |
| admindwes | admin | administrador |
| operadorweb |operadorweb| www-data |
### Usuarios de MySQL
| Usuario | Contraseña | Rool |
| ---- | ----- |------ |
| admindb | P@ssw0rd | administrador
### Configuración de red
* IP: 192.168.3.10X/24
* Máscara: 255.255.255.0
* Puerta de enlace: 192.168.3.1
* DNS: 8.8.8.8
### Nombre del host
Nombre máquina xxx-used, siendo XXX tus iniciales (todo en minúscula)

# Configuración de red
Primer paso entramos en el directorio de configuración de red 
```
cd /etc/netplan
```
Creamos una copia de seguridad del fichero de configuración 

```
sudo cp 00-installer-config.yaml 00-installer-config.backup
```
Editamos el fichero de configuración de red
```
sudo nano 00-installer-config.yaml
```
Modificar los parámetros donde se indica en formato yaml, la siguiente configuración:
```

network:
  ethernets:
    enp0s3:
      addresses:
       - 192.168.2.10x/24
      gateway4: 192.168.3.1
      nameservers:
         addresses:
         - 8.8.8.8
         search: [tunombre.local]
  version: 2
```
Aplicamos los cambios con el siguiente comando:
```
sudo netplan apply
```
COMPROBACIóN
 
Podemos mirar la configuración con ```ifconfig``` (se necesita tener instalado el net tools)
Actualmente se utiliza la utilidad ```ip ```a s ```(ip addr show) ```muestra todas las interfaces disponibles en el sistema.
Podemos hacer ```ping ```  para saber si tenemos salida a Internet, por ejemplo ```ping www.google.es```
Con ip r podemos mirar el gateway
```resolvectl status ``` muestra la configuración de los DNS de la máquina
# Actualización del sistema
Una vez terminada la instalación,  actualizar los repositorios --ver si hay algo nuevo--, es decir actualizar la lista de todos los paquetes, con la dirección de dónde obtenerlos para que a la hora de hacer la búsqueda y su posterior descarga, sea más rápida.
```
sudo apt update
````
y por último, la actualización de nuestro sistema con todas las posibles actualizaciones que pudiera haber, es decir no sólo actualiza nuestro sistema operativo sino que también las aplicaciones que están contenidas en los repositorios.
```
sudo apt upgrade
```
# Nombre de la máquina
### Paso 1.- Cambiar el nombre a la máquina
**PRIMER MÉTODO**
Aquí podemos cambiar el nombre del usuario
```
sudo nano /etc/hostname
```
Aquí debemos cambiar la opción "preserve hostname" a true para mantener los cambios
```
sudo nano /etc/cloud/cloud.cfg
```
**SEGUNDO MÉTODO**
Usando el siguiente comando
```
hostnamectl set-hostname nombremaquina
```
### Paso 2.- Cambiar el fichero  HOSTS
Editar el fichero hosts
```
sudo nano /etc/hosts
```
Cambiar el nombre de la máquina
```
127.0.0.1 localhost
127.0.1.1 nombremaquina
```
Paso 3.- Reiniciar la máquina
```
 reboot
```
# Contafuegos (ufw)
Activar cortafuegos:
```
sudo service ufw start | sudo ufw enable
```
Parar cortafuegos:
```
sudo service ufw stop | sudo ufw disable
```
Reiniciar cortafuegos:
```
sudo service ufw restart
```
Estado del cortafuegos:
```
sudo service ufw status
```
Permitir conexiones ssh o permitir el puerto SSH:
```
sudo ufw allow ssh | sudo ufw allow 22
```
Permitir conexiones apache o permitir el puerto Apache:

```
sudo ufw allow http | sudo ufw allow 80
sudo ufw allow https | sudo ufw allow 443
```
Permitir conexion MYSQL:
```
sudo ufw allow 3306
```
Lista de las app instaladas que el cortafuegos puede permitir (no las activas):
```
sudo ufw app list
```
Lista de las app reglas activas del cortafuegos:
```
sudo ufw status numbered
```
Eliminar reglas del cortafuegos:
```
sudo ufw delete #```
 (Siendo # el numero de la regla EJ. sudo ufw delete 3)
 